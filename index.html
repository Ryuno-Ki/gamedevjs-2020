<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Bizarro's Basketball X</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="./style.css" />
  <script src="./alpinejs/dist/alpine.js"></script>
</head>
<body
  x-data="getGlobalData()"
  x-init="init()"
  x-on:resize.window="model.screen.width = window.innerWidth; model.screen.height = window.innerHeight">
  <div id="messages" x-bind:class="{ 'ready': ready }">
    <form id="form" method="POST" action="#" x-on:submit.prevent="submit">
      <p>Hey there!</p>
      <div>
        <label for="name">
          My name is
          <input
            id="name"
            name="name"
            type="text"
            autofocus
            required
            x-model="model.name"
            x-show="step === 1"
            />
          <span x-text="model.name" x-show="step > 1"></span>
        </label>

        <button
          type="button"
          x-bind.disabled="model.name !== 'name'"
          x-on:click="nextStep(2)"
          x-show="step < 2">
          and ...
        </button>
        <span x-show="step > 1">and ...</span>
      </div>
      <div x-show="step > 1">
        <label for="party">
          Today I feel like
          <select
            id="party"
            name="party"
            x-model="model.chosenParty"
            x-show="step === 2">
            <option value="" selected>umm…</option>
            <template x-for="party in model.parties" :key="party">
              <option x-bind:value="party.mode" x-text="party.label"></option>
            </template>
          </select>
          <span
            x-text="model.chosenParty && model.chosenParty.label"
            x-show="!!model.chosenParty && step > 2">
          </span>
        </label>

        <button
          type="button"
          x-bind.disabled="!model.chosenParty"
          x-on:click="nextStep(3)"
          x-show="!model.chosenParty && step < 3">
          so ...
        </button>
        <button type="submit" x-show="step === 3">Come join me!</button>

        <button type="button" x-on:click="reset()" x-show="step > 3">
          Start a new game
        </button>
      </div>
    </form>
  </div>

  <div id="game" x-show="ready">
    <div x-show="model.chosenParty && model.chosenParty.mode === 'single'">
      Use arrow keys or 
      <kbd>W</kbd><kbd>A</kbd><kbd>S</kbd><kbd>D</kbd>
      to control a character.
    </div>
    <div x-show="model.chosenParty && model.chosenParty.mode === 'multi'">
      Use arrow keys to control your character.
    </div>

    <canvas
      id="content"
      width="706"
      height="572"
      x-on:wheel.prevent=""
      x-on:mousewheel.prevent="">
    </canvas>
  </div>

  <div id="credits" x-show="view === 'credits'">
    <ul>
      <li>
        FavIcon:
        <a href="https://www.favicon.cc/?action=icon&file_id=16065">
          Basketball
        </a> by
        <a href="https://www.favicon.cc/?action=icon_list&user_id=557">
          seanslater
        </a>
        (Creative Commons, no attribution)
      </li>
      <li>
        Emojis:
        <blockquote>
        All emojis designed by
        <a href="https://openmoji.org/">OpenMoji</a> – the open-source emoji and icon project.
        License: <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a>
        </blockquote>
      </li>
      <li>
        Font:
        Press Start 2P by
        <a href="http://www.zone38.net/font/#pressstart">CodeMan38</a>
        (licensed under the
        <a href="https://scripts.sil.org/cms/scripts/page.php?site_id=nrsi&id=OFL">Open Font License</a>)
      </li>
      <li>
        Art Pack:
        <a href="https://opengameart.org/content/sports-pack-350">
          Sports pack (350+)
        </a>
        by
        <a href="https://kenney.nl/">Kenney.nl</a>
        (<a href="http://creativecommons.org/publicdomain/zero/1.0/">CC0</a>)
      </li>
    </ul>
  </div>

  <div>
    <ul id="user-interactions">
      <template x-for="direction in userInteractions" :key="direction">
        <li class="user-interaction" x-text="direction"></li>
      </template>
    </ul>
  </div>
  <script src="./socket.io.js"></script>
  <script src="./simple-peer/simplepeer.min.js"></script>
  <script src="./kontra/kontra.min.js"></script>
</body>
</html>
